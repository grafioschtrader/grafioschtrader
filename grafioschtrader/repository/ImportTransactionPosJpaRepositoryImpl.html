<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (21) on Thu Feb 05 06:46:35 UTC 2026 -->
<title>ImportTransactionPosJpaRepositoryImpl (grafioschtrader 0.33.16 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-02-05">
<meta name="description" content="declaration: package: grafioschtrader.repository, class: ImportTransactionPosJpaRepositoryImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ImportTransactionPosJpaRepositoryImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">grafioschtrader.repository</a></div>
<h1 title="Class ImportTransactionPosJpaRepositoryImpl" class="title">Class ImportTransactionPosJpaRepositoryImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">grafioschtrader.repository.ImportTransactionPosJpaRepositoryImpl</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ImportTransactionPosJpaRepositoryImpl</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></span></div>
<div class="block">Implementation of custom repository operations for import transaction position management and lifecycle processing.
 
 <p>This class serves as the core business logic layer for converting imported financial transaction data
 into validated, permanent transaction records. It handles the entire import transaction lifecycle from
 initial data validation through final transaction creation, including sophisticated correction mechanisms,
 duplicate detection, and multi-currency support.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction.html" class="type-name-link" title="class in grafioschtrader.repository">ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction</a></code></div>
<div class="col-last even-row-color">
<div class="block">Data holder class that links a successfully created transaction with its corresponding import position.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">ImportTransactionPosJpaRepositoryImpl</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#acceptTotalDiff(java.util.List)" class="member-name-link">acceptTotalDiff</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Accepts and records total amount differences for import positions where manual reconciliation is required.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addPossibleExchangeRateForDividend(grafioschtrader.entities.ImportTransactionHead,grafioschtrader.entities.ImportTransactionPos)" class="member-name-link">addPossibleExchangeRateForDividend</a><wbr>(<a href="../entities/ImportTransactionHead.html" title="class in grafioschtrader.entities">ImportTransactionHead</a>&nbsp;importTransactionHead,
 <a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&nbsp;itp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Automatically calculates and adds exchange rates for dividend transactions in foreign currencies.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#adjustCurrencyExRateOrQuotation(java.util.List)" class="member-name-link">adjustCurrencyExRateOrQuotation</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Automatically adjusts currency exchange rates or quotations for import positions with calculation discrepancies.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#assignSecurityToMatchingImportPositions(grafioschtrader.entities.Security)" class="member-name-link">assignSecurityToMatchingImportPositions</a><wbr>(<a href="../entities/Security.html" title="class in grafioschtrader.entities">Security</a>&nbsp;security)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Assigns a security to all import transaction positions that match by ISIN and currency but have no security
 assigned yet.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createAndSaveTransactionsByIds(java.util.List)" class="member-name-link">createAndSaveTransactionsByIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates actual financial transactions from validated import positions using their IDs.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction.html" title="class in grafioschtrader.repository">ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createAndSaveTransactionsFromImpPos(java.util.List,java.util.Map)" class="member-name-link">createAndSaveTransactionsFromImpPos</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;&nbsp;importTransactionPosList,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;&nbsp;idItpMap)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates and saves financial transactions from import transaction positions with automatic corrections.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteMultiple(java.util.List)" class="member-name-link">deleteMultiple</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes multiple import transaction positions in a single batch operation with security validation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../platformimport/CombineTemplateAndImpTransPos.html" title="class in grafioschtrader.platformimport">CombineTemplateAndImpTransPos</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCombineTemplateAndImpTransPosListByTransactionHead(java.lang.Integer)" class="member-name-link">getCombineTemplateAndImpTransPosListByTransactionHead</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransactionHead)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves import transaction positions combined with their associated templates for a given transaction header.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setCashAccount(java.lang.Integer,java.util.List)" class="member-name-link">setCashAccount</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idSecuritycashAccount,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Assigns a cash account to multiple import transaction positions in a batch operation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setCheckReadyForSingleTransaction(grafioschtrader.entities.ImportTransactionPos)" class="member-name-link">setCheckReadyForSingleTransaction</a><wbr>(<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&nbsp;itp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Validates and updates the readiness status for a single import transaction position.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setIdTransactionMayBe(java.lang.Integer,java.util.List)" class="member-name-link">setIdTransactionMayBe</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransactionMaybe,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets potential duplicate transaction references for multiple import positions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSecurity(java.lang.Integer,java.util.List)" class="member-name-link">setSecurity</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idSecuritycurrency,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Assigns a security instrument to multiple import transaction positions in a single batch operation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTrasactionIdToNullWhenExists(java.lang.Integer)" class="member-name-link">setTrasactionIdToNullWhenExists</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resets the transaction reference for an import position when the associated transaction is deleted.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>ImportTransactionPosJpaRepositoryImpl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ImportTransactionPosJpaRepositoryImpl</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getCombineTemplateAndImpTransPosListByTransactionHead(java.lang.Integer)">
<h3>getCombineTemplateAndImpTransPosListByTransactionHead</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../platformimport/CombineTemplateAndImpTransPos.html" title="class in grafioschtrader.platformimport">CombineTemplateAndImpTransPos</a>&gt;</span>&nbsp;<span class="element-name">getCombineTemplateAndImpTransPosListByTransactionHead</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransactionHead)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#getCombineTemplateAndImpTransPosListByTransactionHead(java.lang.Integer)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Retrieves import transaction positions combined with their associated templates for a given transaction header.
 This method provides a comprehensive view of the import status, showing both the imported data and the templates
 used for parsing, along with any potential transaction matches.
 
 <p>
 The method also automatically sets potential transaction matches (maybe transactions) for positions that may
 duplicate existing transactions in the system, helping users identify potential duplicates before creating new
 transaction records.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#getCombineTemplateAndImpTransPosListByTransactionHead(java.lang.Integer)">getCombineTemplateAndImpTransPosListByTransactionHead</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionHead</code> - The ID of the transaction header to retrieve positions for</dd>
<dt>Returns:</dt>
<dd>A list of combined template and import position data, including:
         <ul>
         <li>Import transaction position with calculated differences</li>
         <li>Associated import template (if any)</li>
         <li>Potential duplicate transaction references</li>
         <li>Validation status and readiness indicators</li>
         </ul></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSecurity(java.lang.Integer,java.util.List)">
<h3>setSecurity</h3>
<div class="member-signature"><span class="annotations">@Modifying
@Transactional
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">setSecurity</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idSecuritycurrency,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#setSecurity(java.lang.Integer,java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Assigns a security instrument to multiple import transaction positions in a single batch operation. This method
 validates the security assignment, removes conflicting flags, and updates the readiness status for all affected
 positions.
 
 <p>
 Security assignment is a critical step in the import process as it resolves instrument ambiguity and enables
 accurate transaction processing. The method automatically handles security currency validation and removes related
 error flags when appropriate.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#setSecurity(java.lang.Integer,java.util.List)">setSecurity</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idSecuritycurrency</code> - The ID of the security to assign to the positions</dd>
<dd><code>idTransactionPosList</code> - List of import position IDs to update</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions with assigned security and recalculated readiness status</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setCashAccount(java.lang.Integer,java.util.List)">
<h3>setCashAccount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">setCashAccount</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idSecuritycashAccount,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#setCashAccount(java.lang.Integer,java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Assigns a cash account to multiple import transaction positions in a batch operation. This method ensures the cash
 account belongs to the same portfolio and updates the transaction readiness status for all affected positions.
 
 <p>
 Cash account assignment is essential for proper transaction categorization and portfolio accounting. The method
 validates currency compatibility and portfolio ownership before assignment.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#setCashAccount(java.lang.Integer,java.util.List)">setCashAccount</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idSecuritycashAccount</code> - The ID of the cash account to assign</dd>
<dd><code>idTransactionPosList</code> - List of import position IDs to update</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions with assigned cash account</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setIdTransactionMayBe(java.lang.Integer,java.util.List)">
<h3>setIdTransactionMayBe</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">setIdTransactionMayBe</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransactionMaybe,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#setIdTransactionMayBe(java.lang.Integer,java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Sets potential duplicate transaction references for multiple import positions. This method helps users identify and
 handle potential duplicate transactions by linking import positions to existing transactions that may represent the
 same financial activity.
 
 <p>
 Setting the maybe transaction ID to:
 </p>
 <ul>
 <li><b>null:</b> No potential duplicate identified</li>
 <li><b>0:</b> User confirmed this is not a duplicate</li>
 <li><b>transaction ID:</b> Potential duplicate transaction reference</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#setIdTransactionMayBe(java.lang.Integer,java.util.List)">setIdTransactionMayBe</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionMaybe</code> - The transaction ID that may be a duplicate, or null/0 for no duplicate</dd>
<dd><code>idTransactionPosList</code> - List of import position IDs to update</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions with duplicate references</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteMultiple(java.util.List)">
<h3>deleteMultiple</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteMultiple</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#deleteMultiple(java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Deletes multiple import transaction positions in a single batch operation with security validation. This method
 ensures only positions belonging to the authenticated user's tenant are deleted, providing protection against
 unauthorized data manipulation.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#deleteMultiple(java.util.List)">deleteMultiple</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionPosList</code> - List of import position IDs to delete</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adjustCurrencyExRateOrQuotation(java.util.List)">
<h3>adjustCurrencyExRateOrQuotation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">adjustCurrencyExRateOrQuotation</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#adjustCurrencyExRateOrQuotation(java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Automatically adjusts currency exchange rates or quotations for import positions with calculation discrepancies.
 This method resolves common import issues where exchange rates or quotations need adjustment to match the total
 transaction amount, typically due to rounding differences or rate precision issues.
 
 <p>
 The adjustment logic:
 </p>
 <ul>
 <li>Calculates the required exchange rate or quotation to achieve the reported total</li>
 <li>Applies the adjustment only when differences are within reasonable tolerance</li>
 <li>Updates the readiness status after successful adjustment</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#adjustCurrencyExRateOrQuotation(java.util.List)">adjustCurrencyExRateOrQuotation</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionPosList</code> - List of import position IDs requiring adjustment</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions with corrected rates/quotations</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="acceptTotalDiff(java.util.List)">
<h3>acceptTotalDiff</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">acceptTotalDiff</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#acceptTotalDiff(java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Accepts and records total amount differences for import positions where manual reconciliation is required. This
 method allows users to acknowledge discrepancies between calculated and reported totals, typically for transactions
 where automatic adjustment is not appropriate.
 
 <p>
 Use cases include:
 </p>
 <ul>
 <li>Transactions with detailed fee structures</li>
 <li>Rounding differences in foreign currency transactions</li>
 <li>Platform-specific calculation methods</li>
 <li>Historical data with incomplete information</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#acceptTotalDiff(java.util.List)">acceptTotalDiff</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionPosList</code> - List of import position IDs with accepted differences</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions marked as ready despite differences</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setCheckReadyForSingleTransaction(grafioschtrader.entities.ImportTransactionPos)">
<h3>setCheckReadyForSingleTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setCheckReadyForSingleTransaction</span><wbr><span class="parameters">(<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&nbsp;itp)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#setCheckReadyForSingleTransaction(grafioschtrader.entities.ImportTransactionPos)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Validates and updates the readiness status for a single import transaction position. This method performs
 comprehensive validation to determine if the position contains sufficient and valid data to create a financial
 transaction.
 
 <p>
 Readiness criteria include:
 </p>
 <ul>
 <li>Required fields populated (cash account, transaction type, amount, date)</li>
 <li>Security assigned for security-related transactions</li>
 <li>Amount calculations balanced (or differences accepted)</li>
 <li>Currency and exchange rate validation</li>
 <li>Business day adjustment for dividend payments</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#setCheckReadyForSingleTransaction(grafioschtrader.entities.ImportTransactionPos)">setCheckReadyForSingleTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>itp</code> - The import transaction position to validate and update</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addPossibleExchangeRateForDividend(grafioschtrader.entities.ImportTransactionHead,grafioschtrader.entities.ImportTransactionPos)">
<h3>addPossibleExchangeRateForDividend</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addPossibleExchangeRateForDividend</span><wbr><span class="parameters">(<a href="../entities/ImportTransactionHead.html" title="class in grafioschtrader.entities">ImportTransactionHead</a>&nbsp;importTransactionHead,
 <a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&nbsp;itp)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#addPossibleExchangeRateForDividend(grafioschtrader.entities.ImportTransactionHead,grafioschtrader.entities.ImportTransactionPos)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Automatically calculates and adds exchange rates for dividend transactions in foreign currencies. This method
 handles the common scenario where dividends are paid in a different currency than the security's trading currency,
 requiring automatic exchange rate lookup and application.
 
 <p>
 The method:
 </p>
 <ul>
 <li>Identifies dividend transactions with currency mismatches</li>
 <li>Looks up historical exchange rates for the transaction date</li>
 <li>Applies rates to both dividend amounts and tax withholdings</li>
 <li>Sets appropriate flags for exchange rate handling</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#addPossibleExchangeRateForDividend(grafioschtrader.entities.ImportTransactionHead,grafioschtrader.entities.ImportTransactionPos)">addPossibleExchangeRateForDividend</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>importTransactionHead</code> - The transaction header context for the dividend</dd>
<dd><code>itp</code> - The import transaction position representing the dividend payment</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createAndSaveTransactionsByIds(java.util.List)">
<h3>createAndSaveTransactionsByIds</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;</span>&nbsp;<span class="element-name">createAndSaveTransactionsByIds</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;idTransactionPosList)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#createAndSaveTransactionsByIds(java.util.List)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Creates actual financial transactions from validated import positions using their IDs. This method converts ready
 import positions into permanent transaction records, performing final validation and handling connected
 transactions (such as cash transfers).</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#createAndSaveTransactionsByIds(java.util.List)">createAndSaveTransactionsByIds</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransactionPosList</code> - List of import position IDs ready for transaction creation</dd>
<dt>Returns:</dt>
<dd>Updated list of import transaction positions with created transaction references</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createAndSaveTransactionsFromImpPos(java.util.List,java.util.Map)">
<h3>createAndSaveTransactionsFromImpPos</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction.html" title="class in grafioschtrader.repository">ImportTransactionPosJpaRepositoryImpl.SavedImpPosAndTransaction</a>&gt;</span>&nbsp;<span class="element-name">createAndSaveTransactionsFromImpPos</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;&nbsp;importTransactionPosList,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="../entities/ImportTransactionPos.html" title="class in grafioschtrader.entities">ImportTransactionPos</a>&gt;&nbsp;idItpMap)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#createAndSaveTransactionsFromImpPos(java.util.List,java.util.Map)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Creates and saves financial transactions from import transaction positions with automatic corrections. This is the
 core method for converting validated import data into permanent transaction records, applying final corrections and
 handling advanced scenarios like cash account transfers.
 
 <p>
 The method handles:
 </p>
 <ul>
 <li>Single transactions (buys, sells, dividends, fees)</li>
 <li>Connected transactions (cash account transfers)</li>
 <li>Currency pair creation and exchange rate application</li>
 <li>Bond unit and quotation adjustments</li>
 <li>Security currency mismatch resolution</li>
 <li>Transaction error handling and rollback</li>
 </ul>
 
 <p>
 Processing includes automatic corrections for:
 </p>
 <ul>
 <li>Bond transactions with unit=1 requiring position-based adjustment</li>
 <li>Security currency mismatches resolved by portfolio holdings</li>
 <li>Missing exchange rates for multi-currency transactions</li>
 <li>Weekend date adjustments for dividend payments</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#createAndSaveTransactionsFromImpPos(java.util.List,java.util.Map)">createAndSaveTransactionsFromImpPos</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>importTransactionPosList</code> - List of validated import positions to convert</dd>
<dd><code>idItpMap</code> - Optional map of position IDs to positions for handling connected transactions</dd>
<dt>Returns:</dt>
<dd>List of successfully created transaction and position pairs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTrasactionIdToNullWhenExists(java.lang.Integer)">
<h3>setTrasactionIdToNullWhenExists</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setTrasactionIdToNullWhenExists</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;idTransaction)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#setTrasactionIdToNullWhenExists(java.lang.Integer)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Resets the transaction reference for an import position when the associated transaction is deleted. This method
 maintains data consistency by clearing import position links when their corresponding transactions are removed from
 the system.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#setTrasactionIdToNullWhenExists(java.lang.Integer)">setTrasactionIdToNullWhenExists</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>idTransaction</code> - The ID of the deleted transaction to unlink from import positions</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="assignSecurityToMatchingImportPositions(grafioschtrader.entities.Security)">
<h3>assignSecurityToMatchingImportPositions</h3>
<div class="member-signature"><span class="annotations">@Transactional
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">assignSecurityToMatchingImportPositions</span><wbr><span class="parameters">(<a href="../entities/Security.html" title="class in grafioschtrader.entities">Security</a>&nbsp;security)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html#assignSecurityToMatchingImportPositions(grafioschtrader.entities.Security)">ImportTransactionPosJpaRepositoryCustom</a></code></span></div>
<div class="block">Assigns a security to all import transaction positions that match by ISIN and currency but have no security
 assigned yet. This method is called after GTNet import successfully links or creates a security, to automatically
 update matching import positions so they become ready for transaction creation.

 <p>
 For each matching position:
 <ul>
   <li>Assigns the security using <a href="../entities/ImportTransactionPos.html#setSecurityRemoveFromFlag(grafioschtrader.entities.Security)"><code>ImportTransactionPos.setSecurityRemoveFromFlag(Security)</code></a></li>
   <li>Validates and updates readiness status via <a href="ImportTransactionPosJpaRepositoryCustom.html#setCheckReadyForSingleTransaction(grafioschtrader.entities.ImportTransactionPos)"><code>ImportTransactionPosJpaRepositoryCustom.setCheckReadyForSingleTransaction(ImportTransactionPos)</code></a></li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ImportTransactionPosJpaRepositoryCustom.html#assignSecurityToMatchingImportPositions(grafioschtrader.entities.Security)">assignSecurityToMatchingImportPositions</a></code>&nbsp;in interface&nbsp;<code><a href="ImportTransactionPosJpaRepositoryCustom.html" title="interface in grafioschtrader.repository">ImportTransactionPosJpaRepositoryCustom</a></code></dd>
<dt>Parameters:</dt>
<dd><code>security</code> - the security to assign to matching positions; if null or missing ISIN/currency, returns 0</dd>
<dt>Returns:</dt>
<dd>the number of import positions that were updated</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2026 grafioschtrader. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
